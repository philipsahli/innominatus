apiVersion: score.dev/v1b1
metadata:
  name: alice-nginx-simple

containers:
  web:
    image: nginx:1.25
    ports:
      - port: 80
        protocol: TCP

resources:
  route:
    type: route
    params:
      host: alice-nginx.localtest.me
      port: 80

  git-repo:
    type: gitea
    params:
      description: "Alice's nginx deployment repository"
      private: false

  argocd-app:
    type: argocd
    params:
      repoURL: "${resources.git-repo.outputs.repository_url}"
      path: "manifests"
      targetNamespace: "alice-nginx-simple"

environment:
  type: kubernetes
  ttl: 24h
