apiVersion: score.dev/v1b1

metadata:
  name: ecommerce-frontend

containers:
  main:
    image: myorg/ecommerce-backend:v1.1.0
    env:
      # Database credentials injected automatically
      DATABASE_HOST: ${resources.db.host}
      DATABASE_PORT: ${resources.db.port}
      DATABASE_NAME: ${resources.db.database_name}
      DATABASE_USER: ${resources.db.username}
      DATABASE_PASSWORD: ${resources.db.password}
      DATABASE_URL: ${resources.db.connection_string}

      # S3 storage credentials (added in v2)
      S3_ENDPOINT: ${resources.storage.endpoint}
      S3_BUCKET: ${resources.storage.bucket}
      S3_ACCESS_KEY: ${resources.storage.access_key}
      S3_SECRET_KEY: ${resources.storage.secret_key}

resources:
  # PostgreSQL database - provisioned by database-team provider
  db:
    type: postgres
    properties:
      version: "15"
      size: "medium"
      replicas: 2

  # S3 storage - provisioned by storage-team provider (ADDED IN V2)
  storage:
    type: s3
    properties:
      size: "standard"
      versioning: true
      public_read: false
